{
    "id": "tw.ddnet.ddnet",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "19.08",
    "sdk": "org.freedesktop.Sdk",
    "default-branch": "stable",
    "finish-args": [
        "--device=dri",
        "--persist=.teeworlds",
        "--share=ipc",
        "--share=network",
        "--socket=pulseaudio",
        "--socket=wayland",
        "--socket=x11",
        "--talk-name=org.freedesktop.Notifications"
    ],
    "rename-desktop-file": "ddnet.desktop",
    "rename-icon": "ddnet",
    "rename-appdata-file": "ddnet.appdata.xml",
    "cleanup": [
        "/bin/DDNet-Server",
        "/include",
        "/lib/girepository-1.0",
        "/lib/pkgconfig",
        "/share/gir-1.0"
    ],
    "modules": [
        {
            "name": "ddnet",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "config-opts": [
                "-DAUTOUPDATE=OFF"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/ddnet/ddnet.git",
                    "tag": "13.1",
                    "commit": "a723299cb98dcecb0ba356851c1888211f781039",
                    "disable-fsckobjects": true
                },
                {
                    "type": "shell",
                    "commands": [
                        "rm -rf ddnet-libs"
                    ]
                },
                {
                    "type": "patch",
                    "path": "ddnet-set-data-dir.patch"
                },
                {
                    "type": "patch",
                    "path": "2189.patch"
                }
            ],
            "modules": [
                "shared-modules/glew/glew.json",
                "shared-modules/glu/glu-9.json",
                {
                    "name": "libnotify",
                    "buildsystem": "meson",
                    "config-opts": [
                        "-Dman=false",
                        "-Dgtk_doc=false"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://ftp.acc.umu.se/pub/GNOME/sources/libnotify/0.7/libnotify-0.7.9.tar.xz",
                            "sha256": "66c0517ed16df7af258e83208faaf5069727dfd66995c4bbc51c16954d674761"
                        }
                    ]
                },
                {
                    "name": "libogg",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://downloads.xiph.org/releases/ogg/libogg-1.3.4.tar.xz",
                            "sha256": "c163bc12bc300c401b6aa35907ac682671ea376f13ae0969a220f7ddf71893fe"
                        }
                    ]
                },
                {
                    "name": "libopus",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://archive.mozilla.org/pub/opus/opus-1.3.1.tar.gz",
                            "sha256": "65b58e1e25b2a114157014736a3d9dfeaad8d41be1c8179866f144a2fb44ff9d"
                        }
                    ]
                },
                {
                    "name": "opusfile",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://downloads.xiph.org/releases/opus/opusfile-0.11.tar.gz",
                            "sha256": "74ce9b6cf4da103133e7b5c95df810ceb7195471e1162ed57af415fabf5603bf"
                        }
                    ]
                }
            ]
        }
    ]
}
